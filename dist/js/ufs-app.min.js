/*!
 * Mowe {ProjectName} Project v0.0.0 (http://letsmowe.org/)
 * Copyright 2013-2015 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/base/blob/master/LICENSE)
*/
var App=function(){function e(e,t){var n=this;this.element=e,this.base=t,this.votingBox=new VotingBox(document.getElementById("voting-box"),this.base),this.header=document.getElementById("ufs-app-header"),this.fullscreenCtrl=function(){n.requestFullScreen()},this.isFullscreen=!1,this.init()}return e.prototype.requestFullScreen=function(){this.isFullscreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen(),this.isFullscreen=!this.isFullscreen},e.prototype.init=function(){this.header.addEventListener("click",this.fullscreenCtrl)},e}(),Candidate=function(){function e(e,t){this.element=e,this.candidateRef=t,this.onMatchChange=function(e){var t=e.val();t&&self.build(t)},this.element&&this.candidateRef&&this.init()}return e.prototype.build=function(e){try{this.element.innerHTML="",this.background=document.createElement("div"),this.element.appendChild(this.background),this.inner=document.createElement("div"),this.element.appendChild(this.inner),this.name=document.createElement("span"),this.photoURL=document.createElement("img"),this.name.appendChild(document.createTextNode(e.name)),this.name.appendChild(document.createTextNode(e.photoURL))}catch(t){}},e.prototype.destroy=function(){try{this.element.innerHeight="",self.candidateRef.off()}catch(e){}},e.prototype.ctrlDataRefs=function(){try{this.candidateRef.on("value",this.onCandidateChange)}catch(e){}},e.prototype.init=function(){this.ctrlDataRefs()},e}(),Match=function(){function e(e,t){var n=this;this.element=e,this.matchRef=t,this.candidates=[],this.onMatchChange=function(e){var t=e.val();t&&(n.destroy(),n.build(t))},this.element&&this.matchRef&&this.init()}return e.prototype.build=function(){try{this.title=""}catch(e){}},e.prototype.destroy=function(){console.log("destruindo match");try{for(var e=this.candidates.length;e--;)candidates[e].destroy();this.element.innerHTML="",this.matchRef.off()}catch(t){}},e.prototype.ctrlDataRefs=function(){try{this.matchRef.on("value",this.onMatchChange)}catch(e){}},e.prototype.init=function(){this.matchRef.on("value",function(e){console.log(e.val())})},e}(),VotingBox=function(){function e(e,t){var n=this;this.element=e,this.base=t,this.current=!1,this.match=!1,this.onCurrentChange=function(e){var t=e.val();t&&(n.current=t,n.match&&n.match.destroy(),n.match=new Match(document.getElementById("match"),n.rootRef.ref("matches").child(t)))},this.element&&this.base&&this.init()}return e.prototype.ctrlDataRefs=function(){this.rootRef=this.base.database(),this.currentRef=this.rootRef.ref("current"),this.currentRef.on("value",this.onCurrentChange)},e.prototype.init=function(){this.ctrlDataRefs()},e}();