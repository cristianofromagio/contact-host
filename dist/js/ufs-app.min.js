/*!
 * Mowe {ProjectName} Project v0.0.0 (http://letsmowe.org/)
 * Copyright 2013-2015 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/base/blob/master/LICENSE)
*/
var App=function(){function e(e,t){var n=this;this.element=e,this.base=t,this.VotingBox=new VotingBox(document.getElementById("voting-box"),this.base),this.header=document.getElementById("ufs-app-header"),this.fullscreenCtrl=function(){n.requestFullScreen()},this.isFullscreen=!1,this.init()}return e.prototype.requestFullScreen=function(){this.isFullscreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen(),this.isFullscreen=!this.isFullscreen},e.prototype.init=function(){this.header.addEventListener("click",this.fullscreenCtrl)},e}(),Match=function(){function e(e,t){this.element=e,this.matchRef=t,this.candidates=[],this.element&&this.matchRef&&this.init()}return e.prototype.destroy=function(){console.log("destruindo match");try{this.matchRef.off()}catch(e){}},e.prototype.init=function(){this.matchRef.on("value",function(e){console.log(e.val())})},e}(),VotingBox=function(){function e(e,t){var n=this;this.element=e,this.base=t,this.current=!1,this.match=!1,this.onCurrentChange=function(e){var t=e.val();t&&(n.current=t,n.match&&n.match.destroy(),n.match=new Match((!0),n.rootRef.ref("matches").child(t)))},this.element&&this.base&&this.init()}return e.prototype.ctrlDataRefs=function(){this.rootRef=this.base.database(),this.currentRef=this.rootRef.ref("current"),this.currentRef.on("value",this.onCurrentChange)},e.prototype.init=function(){this.ctrlDataRefs()},e}();